<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>XML HTTP Request JSON</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">        
    </head>

    <body>    
    
    <script>
        window.onload = function() {
            document.getElementById("Save").onclick = function fun() {
            
            var userInput = document.forms["thisForm"]["ip_address"].value;
            var Url = "https://httpbin.org/post";
            var xhr = new XMLHttpRequest();
            
            xhr.open('POST', Url, true);
            xhr.send(userInput);
            xhr.onreadystatechange = processRequest;
            
                function processRequest(m) {
                    if (xhr.readyState === 4 && xhr.status === 200) {
                        var response1 = JSON.parse(xhr.responseText);
                        var json = JSON.stringify(response1);
                        
                        document.getElementById("userIP").innerHTML = response1.origin;
                        document.getElementById("address").innerHTML = response1.url;
                        document.getElementById("input").innerHTML = response1.data;
                        
                    }
                    var json = JSON.stringify(response1);
                    document.getElementById("input").innerHTML = json;
                }
            };
        }
   </script>


<h1> Javascript Post Request Test </h1>

<p>This button does the following:<br>
    1. Sends a POST request to https://httpbin.org<br>
    2. Displays the JSON data obtained from that site.<br>
    3. Finds your current IP address in the data.<br>
    4. Displays the source URL and your IP address.<br>
    (I am planning to add a user-input element in a future iteration, that's what the text-box is for)</p>
<br><br> 
 <form name="thisForm">
 <input type="text" name="ip_address"/>
 <input type="button" id="Save" onclick="f1()" value="test"/>
</form>
 <br><br> 

 <p id="input"></p>
 <p id="userIP"></p>
 <p id="address"></p>
 
 
        
        <input type="button" onclick="window.location.href='https://thoming-michael.github.io/public_html/index.html';" value="Back to Main Menu"/>       

    </body>
</html>
